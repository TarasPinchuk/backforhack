{"openapi":"3.1.0","info":{"title":"City Guide — Places Service","description":"Минимальный сервис для хранения и выдачи мест (places) и маршрутов (routes) — самостоятельный, без авторизации, с автогенерацией Swagger.","version":"0.2.0"},"paths":{"/health":{"get":{"tags":["system"],"summary":"Health","operationId":"health_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/places":{"post":{"tags":["places"],"summary":"Create Place","operationId":"create_place_places_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlaceCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlaceOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["places"],"summary":"List Places","operationId":"list_places_places_get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PlaceOut"},"title":"Response List Places Places Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/places/{place_id}":{"get":{"tags":["places"],"summary":"Get Place","operationId":"get_place_places__place_id__get","parameters":[{"name":"place_id","in":"path","required":true,"schema":{"type":"string","title":"Place Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlaceOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["places"],"summary":"Patch Place","operationId":"patch_place_places__place_id__patch","parameters":[{"name":"place_id","in":"path","required":true,"schema":{"type":"string","title":"Place Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlacePatch"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlaceOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["places"],"summary":"Delete Place","operationId":"delete_place_places__place_id__delete","parameters":[{"name":"place_id","in":"path","required":true,"schema":{"type":"string","title":"Place Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/routes":{"post":{"tags":["routes"],"summary":"Create Route","operationId":"create_route_routes_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RouteCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RouteOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["routes"],"summary":"List Routes","operationId":"list_routes_routes_get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RouteOut"},"title":"Response List Routes Routes Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/routes/{route_id}":{"get":{"tags":["routes"],"summary":"Get Route","operationId":"get_route_routes__route_id__get","parameters":[{"name":"route_id","in":"path","required":true,"schema":{"type":"string","title":"Route Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RouteOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["routes"],"summary":"Patch Route","operationId":"patch_route_routes__route_id__patch","parameters":[{"name":"route_id","in":"path","required":true,"schema":{"type":"string","title":"Route Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoutePatch"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RouteOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["routes"],"summary":"Delete Route","operationId":"delete_route_routes__route_id__delete","parameters":[{"name":"route_id","in":"path","required":true,"schema":{"type":"string","title":"Route Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"PlaceCreate":{"properties":{"name":{"type":"string","title":"Name","description":"Название места","examples":["Кофейня «Маяк»"]},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Описание"},"photos":{"anyOf":[{"items":{"type":"string","maxLength":2083,"minLength":1,"format":"uri"},"type":"array"},{"type":"null"}],"title":"Photos","description":"Список ссылок на фото","examples":[["https://cdn.example.com/p/1.jpg","https://cdn.example.com/p/2.jpg"]]},"review_widget_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Review Widget Url","description":"Любая строка/HTML виджета отзывов (вставка как есть)","examples":["<div><iframe src=\"https://yandex.ru/maps-reviews-widget/...\"></iframe></div>"]},"lat":{"type":"number","maximum":90.0,"minimum":-90.0,"title":"Lat","description":"Широта","examples":[55.7558]},"lon":{"type":"number","maximum":180.0,"minimum":-180.0,"title":"Lon","description":"Долгота","examples":[37.6173]}},"type":"object","required":["name","lat","lon"],"title":"PlaceCreate"},"PlaceOut":{"properties":{"id":{"type":"string","title":"Id","description":"Идентификатор места (Mongo ObjectId)"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"photos":{"items":{"type":"string"},"type":"array","title":"Photos"},"review_widget_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Review Widget Url"},"lat":{"type":"number","title":"Lat"},"lon":{"type":"number","title":"Lon"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","name","lat","lon","created_at","updated_at"],"title":"PlaceOut"},"PlacePatch":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name","description":"Название"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Описание"},"photos":{"anyOf":[{"items":{"type":"string","maxLength":2083,"minLength":1,"format":"uri"},"type":"array"},{"type":"null"}],"title":"Photos","description":"Ссылки на фото"},"review_widget_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Review Widget Url","description":"Строка/HTML виджета отзывов"},"lat":{"anyOf":[{"type":"number","maximum":90.0,"minimum":-90.0},{"type":"null"}],"title":"Lat","description":"Широта"},"lon":{"anyOf":[{"type":"number","maximum":180.0,"minimum":-180.0},{"type":"null"}],"title":"Lon","description":"Долгота"}},"type":"object","title":"PlacePatch"},"RouteCreate":{"properties":{"name":{"type":"string","title":"Name","description":"Название маршрута","examples":["Маршрут по центру"]},"summary":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Summary","description":"Краткое описание маршрута"},"photo_url":{"anyOf":[{"type":"string","maxLength":2083,"minLength":1,"format":"uri"},{"type":"null"}],"title":"Photo Url","description":"Обложка маршрута (URL фото)"},"stops":{"items":{"$ref":"#/components/schemas/RouteStop"},"type":"array","title":"Stops","description":"Последовательный массив точек маршрута","examples":[[{"description":"Старт","lat":55.7558,"lon":37.6173,"name":"Площадь Свободы","photo_url":"https://cdn.example.com/route/stop1.jpg"}]]}},"type":"object","required":["name"],"title":"RouteCreate"},"RouteOut":{"properties":{"id":{"type":"string","title":"Id","description":"Идентификатор маршрута (Mongo ObjectId)"},"name":{"type":"string","title":"Name"},"summary":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Summary"},"photo_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Photo Url"},"stops":{"items":{"$ref":"#/components/schemas/RouteStopOut"},"type":"array","title":"Stops"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","name","created_at","updated_at"],"title":"RouteOut"},"RoutePatch":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name","description":"Название маршрута"},"summary":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Summary","description":"Краткое описание"},"photo_url":{"anyOf":[{"type":"string","maxLength":2083,"minLength":1,"format":"uri"},{"type":"null"}],"title":"Photo Url","description":"Обложка маршрута (URL)"},"stops":{"anyOf":[{"items":{"$ref":"#/components/schemas/RouteStop"},"type":"array"},{"type":"null"}],"title":"Stops","description":"Полная замена массива точек"}},"type":"object","title":"RoutePatch"},"RouteStop":{"properties":{"name":{"type":"string","title":"Name","description":"Название точки"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Описание"},"photo_url":{"anyOf":[{"type":"string","maxLength":2083,"minLength":1,"format":"uri"},{"type":"null"}],"title":"Photo Url","description":"URL фото точки"},"lat":{"type":"number","maximum":90.0,"minimum":-90.0,"title":"Lat","description":"Широта"},"lon":{"type":"number","maximum":180.0,"minimum":-180.0,"title":"Lon","description":"Долгота"}},"type":"object","required":["name","lat","lon"],"title":"RouteStop","description":"Одна точка маршрута (последовательный шаг)."},"RouteStopOut":{"properties":{"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"photo_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Photo Url"},"lat":{"type":"number","title":"Lat"},"lon":{"type":"number","title":"Lon"}},"type":"object","required":["name","lat","lon"],"title":"RouteStopOut"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}